

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>KeyTable &mdash; Hail</title>
  

  
  
    <link rel="shortcut icon" href="hail_logo_sq.png"/>
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="navbar.css" type="text/css" />
  
    <link rel="stylesheet" href="_static/rtd_modifications.css" type="text/css" />
  

  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="Hail" href="index.html"/>
        <link rel="up" title="Python API" href="api.html"/>
        <link rel="next" title="TextTableConfig" href="hail.TextTableConfig.html"/>
        <link rel="prev" title="VariantDataset" href="hail.VariantDataset.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>
  
  

</head>

<body class="wy-body-for-nav" role="document">

  <nav class="navbar navbar-default navbar-static-top" id="hail-navbar">
<div class="container-fluid" id="hail-container-fluid">
    <div class="navbar-header" id="hail-navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#hail-navbar-collapse" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
   
      <a class="navbar-left" id="hail-navbar-brand" href="../index.html"><img alt="Hail" id="logo" src="hail-logo-cropped.png"></a>

    </div>

    <div class="collapse navbar-collapse" id="hail-navbar-collapse">
      <ul class="nav navbar-nav navbar-right">
          <li id="home" class="nav-item"><a href="../index.html">HOME</a></li>
          <li id="docs" class="nav-item"><a href="index.html">DOCS</a></li>
          <li id="forum" class="nav-item"><a href="http://discuss.hail.is">FORUM</a></li>
          <li id="chat" class="nav-item dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">CHAT<span class="caret"></span></a>
          <ul class="dropdown-menu dropdown-menu-left">
            <li><a class="dropdown-item" href="https://gitter.im/hail-is/hail">General</a></li>
            <li><a class="dropdown-item" href="https://gitter.im/hail-is/hail-dev">Developers</a></li>
          </ul>
        </li>
       <li id="code" class="nav-item"><a href="https://github.com/hail-is/hail">CODE</a></li>
      </ul>
    </div>
  </div>
</nav>

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> Hail
          

          
          </a>

          
            
            
              <div class="version">
                devel
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="getting_started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial.html">Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="exprlang.html">Expression Language</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="api.html">Python API</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="hail.HailContext.html">HailContext</a></li>
<li class="toctree-l2"><a class="reference internal" href="hail.VariantDataset.html">VariantDataset</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">KeyTable</a></li>
<li class="toctree-l2"><a class="reference internal" href="hail.TextTableConfig.html">TextTableConfig</a></li>
<li class="toctree-l2"><a class="reference internal" href="hail.KinshipMatrix.html">KinshipMatrix</a></li>
<li class="toctree-l2"><a class="reference internal" href="representation/index.html">representation</a></li>
<li class="toctree-l2"><a class="reference internal" href="expr/index.html">expr</a></li>
<li class="toctree-l2"><a class="reference internal" href="utils/index.html">utils</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="annotationdb.html">Annotation Database</a></li>
<li class="toctree-l1"><a class="reference internal" href="other_resources.html">Other Resources</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">Hail</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
          <li><a href="api.html">Python API</a> &raquo;</li>
        
      <li>KeyTable</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/hail.KeyTable.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast,
.nboutput.nblast {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast + .nbinput {
    margin-top: -19px;
}

/* nice headers on first paragraph of info/warning boxes */
.admonition .first {
    margin: -12px;
    padding: 6px 12px;
    margin-bottom: 12px;
    color: #fff;
    line-height: 1;
    display: block;
}
.admonition.warning .first {
    background: #f0b37e;
}
.admonition.note .first {
    background: #6ab0de;
}
.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}
</style>
<div class="section" id="keytable">
<h1>KeyTable<a class="headerlink" href="#keytable" title="Permalink to this headline">¶</a></h1>
<dl class="class">
<dt id="hail.KeyTable">
<em class="property">class </em><code class="descclassname">hail.</code><code class="descname">KeyTable</code><span class="sig-paren">(</span><em>hc</em>, <em>jkt</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/hail/keytable.html#KeyTable"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#hail.KeyTable" title="Permalink to this definition">¶</a></dt>
<dd><p>Hail&#8217;s version of a SQL table where columns can be designated as keys.</p>
<p>Key tables may be imported from a text file or Spark DataFrame with <a class="reference internal" href="hail.HailContext.html#hail.HailContext.import_keytable" title="hail.HailContext.import_keytable"><code class="xref py py-meth docutils literal"><span class="pre">import_keytable()</span></code></a>
or <a class="reference internal" href="hail.HailContext.html#hail.HailContext.dataframe_to_keytable" title="hail.HailContext.dataframe_to_keytable"><code class="xref py py-meth docutils literal"><span class="pre">dataframe_to_keytable()</span></code></a>, or generated from an existing variant dataset
with <a class="reference internal" href="hail.VariantDataset.html#hail.VariantDataset.aggregate_by_key" title="hail.VariantDataset.aggregate_by_key"><code class="xref py py-meth docutils literal"><span class="pre">aggregate_by_key()</span></code></a>, <a class="reference internal" href="hail.VariantDataset.html#hail.VariantDataset.make_keytable" title="hail.VariantDataset.make_keytable"><code class="xref py py-meth docutils literal"><span class="pre">make_keytable()</span></code></a>,
<a class="reference internal" href="hail.VariantDataset.html#hail.VariantDataset.samples_keytable" title="hail.VariantDataset.samples_keytable"><code class="xref py py-meth docutils literal"><span class="pre">samples_keytable()</span></code></a>, or <a class="reference internal" href="hail.VariantDataset.html#hail.VariantDataset.variants_keytable" title="hail.VariantDataset.variants_keytable"><code class="xref py py-meth docutils literal"><span class="pre">variants_keytable()</span></code></a>.</p>
<p>In the examples below, we have imported two key tables from text files (<code class="docutils literal"><span class="pre">kt1</span></code> and <code class="docutils literal"><span class="pre">kt2</span></code>).</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">kt1</span> <span class="o">=</span> <span class="n">hc</span><span class="o">.</span><span class="n">import_keytable</span><span class="p">(</span><span class="s1">&#39;data/kt_example1.tsv&#39;</span><span class="p">,</span> <span class="n">config</span><span class="o">=</span><span class="n">TextTableConfig</span><span class="p">(</span><span class="n">impute</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>
</pre></div>
</div>
<table border="1" class="docutils">
<colgroup>
<col width="9%" />
<col width="14%" />
<col width="14%" />
<col width="5%" />
<col width="5%" />
<col width="18%" />
<col width="18%" />
<col width="18%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">ID</th>
<th class="head">HT</th>
<th class="head">SEX</th>
<th class="head">X</th>
<th class="head">Z</th>
<th class="head">C1</th>
<th class="head">C2</th>
<th class="head">C3</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>1</td>
<td>65</td>
<td>M</td>
<td>5</td>
<td>4</td>
<td>2</td>
<td>50</td>
<td>5</td>
</tr>
<tr class="row-odd"><td>2</td>
<td>72</td>
<td>M</td>
<td>6</td>
<td>3</td>
<td>2</td>
<td>61</td>
<td>1</td>
</tr>
<tr class="row-even"><td>3</td>
<td>70</td>
<td>F</td>
<td>7</td>
<td>3</td>
<td>10</td>
<td>81</td>
<td>-5</td>
</tr>
<tr class="row-odd"><td>4</td>
<td>60</td>
<td>F</td>
<td>8</td>
<td>2</td>
<td>11</td>
<td>90</td>
<td>-10</td>
</tr>
</tbody>
</table>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">kt2</span> <span class="o">=</span> <span class="n">hc</span><span class="o">.</span><span class="n">import_keytable</span><span class="p">(</span><span class="s1">&#39;data/kt_example2.tsv&#39;</span><span class="p">,</span> <span class="n">config</span><span class="o">=</span><span class="n">TextTableConfig</span><span class="p">(</span><span class="n">impute</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>
</pre></div>
</div>
<table border="1" class="docutils">
<colgroup>
<col width="25%" />
<col width="25%" />
<col width="50%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">ID</th>
<th class="head">A</th>
<th class="head">B</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>1</td>
<td>65</td>
<td>cat</td>
</tr>
<tr class="row-odd"><td>2</td>
<td>72</td>
<td>dog</td>
</tr>
<tr class="row-even"><td>3</td>
<td>70</td>
<td>mouse</td>
</tr>
<tr class="row-odd"><td>4</td>
<td>60</td>
<td>rabbit</td>
</tr>
</tbody>
</table>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Variables:</th><td class="field-body"><strong>hc</strong> (<a class="reference internal" href="hail.HailContext.html#hail.HailContext" title="hail.HailContext"><code class="xref py py-class docutils literal"><span class="pre">HailContext</span></code></a>) &#8211; Hail Context</td>
</tr>
</tbody>
</table>
<p class="rubric">Attributes</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#hail.KeyTable.column_names" title="hail.KeyTable.column_names"><code class="xref py py-obj docutils literal"><span class="pre">column_names</span></code></a></td>
<td>Names of all columns.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#hail.KeyTable.key" title="hail.KeyTable.key"><code class="xref py py-obj docutils literal"><span class="pre">key</span></code></a></td>
<td>List of key column names.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#hail.KeyTable.num_columns" title="hail.KeyTable.num_columns"><code class="xref py py-obj docutils literal"><span class="pre">num_columns</span></code></a></td>
<td>Number of columns.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#hail.KeyTable.schema" title="hail.KeyTable.schema"><code class="xref py py-obj docutils literal"><span class="pre">schema</span></code></a></td>
<td>Key table schema.</td>
</tr>
</tbody>
</table>
<p class="rubric">Methods</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">__init__</span></code></td>
<td></td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#hail.KeyTable.aggregate_by_key" title="hail.KeyTable.aggregate_by_key"><code class="xref py py-obj docutils literal"><span class="pre">aggregate_by_key</span></code></a></td>
<td>Group by key condition and aggregate results.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#hail.KeyTable.annotate" title="hail.KeyTable.annotate"><code class="xref py py-obj docutils literal"><span class="pre">annotate</span></code></a></td>
<td>Add new columns computed from existing columns.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#hail.KeyTable.cache" title="hail.KeyTable.cache"><code class="xref py py-obj docutils literal"><span class="pre">cache</span></code></a></td>
<td>Mark this key table to be cached in memory.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#hail.KeyTable.collect" title="hail.KeyTable.collect"><code class="xref py py-obj docutils literal"><span class="pre">collect</span></code></a></td>
<td>Collect key table as a Python object.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#hail.KeyTable.count_rows" title="hail.KeyTable.count_rows"><code class="xref py py-obj docutils literal"><span class="pre">count_rows</span></code></a></td>
<td>Number of rows.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#hail.KeyTable.exists" title="hail.KeyTable.exists"><code class="xref py py-obj docutils literal"><span class="pre">exists</span></code></a></td>
<td>Test whether a condition is true for at least one row.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#hail.KeyTable.expand_types" title="hail.KeyTable.expand_types"><code class="xref py py-obj docutils literal"><span class="pre">expand_types</span></code></a></td>
<td>Expand types Locus, Interval, AltAllele, Variant, Genotype, Char, Set and Dict.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#hail.KeyTable.explode" title="hail.KeyTable.explode"><code class="xref py py-obj docutils literal"><span class="pre">explode</span></code></a></td>
<td>Explode columns of this key table.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#hail.KeyTable.export" title="hail.KeyTable.export"><code class="xref py py-obj docutils literal"><span class="pre">export</span></code></a></td>
<td>Export to a TSV file.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#hail.KeyTable.export_cassandra" title="hail.KeyTable.export_cassandra"><code class="xref py py-obj docutils literal"><span class="pre">export_cassandra</span></code></a></td>
<td>Export to Cassandra.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#hail.KeyTable.export_mongodb" title="hail.KeyTable.export_mongodb"><code class="xref py py-obj docutils literal"><span class="pre">export_mongodb</span></code></a></td>
<td>Export to MongoDB</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#hail.KeyTable.export_solr" title="hail.KeyTable.export_solr"><code class="xref py py-obj docutils literal"><span class="pre">export_solr</span></code></a></td>
<td>Export to Solr.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#hail.KeyTable.filter" title="hail.KeyTable.filter"><code class="xref py py-obj docutils literal"><span class="pre">filter</span></code></a></td>
<td>Filter rows.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#hail.KeyTable.flatten" title="hail.KeyTable.flatten"><code class="xref py py-obj docutils literal"><span class="pre">flatten</span></code></a></td>
<td>Flatten nested Structs.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#hail.KeyTable.forall" title="hail.KeyTable.forall"><code class="xref py py-obj docutils literal"><span class="pre">forall</span></code></a></td>
<td>Test whether a condition is true for all rows.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#hail.KeyTable.from_py" title="hail.KeyTable.from_py"><code class="xref py py-obj docutils literal"><span class="pre">from_py</span></code></a></td>
<td></td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#hail.KeyTable.join" title="hail.KeyTable.join"><code class="xref py py-obj docutils literal"><span class="pre">join</span></code></a></td>
<td>Join two key tables together.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#hail.KeyTable.key_by" title="hail.KeyTable.key_by"><code class="xref py py-obj docutils literal"><span class="pre">key_by</span></code></a></td>
<td>Change which columns are keys.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#hail.KeyTable.order_by" title="hail.KeyTable.order_by"><code class="xref py py-obj docutils literal"><span class="pre">order_by</span></code></a></td>
<td>Sort by the specified columns.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#hail.KeyTable.persist" title="hail.KeyTable.persist"><code class="xref py py-obj docutils literal"><span class="pre">persist</span></code></a></td>
<td>Persist this key table to memory and/or disk.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#hail.KeyTable.query" title="hail.KeyTable.query"><code class="xref py py-obj docutils literal"><span class="pre">query</span></code></a></td>
<td>Performs aggregation queries over columns of the table, and returns Python object(s).</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#hail.KeyTable.query_typed" title="hail.KeyTable.query_typed"><code class="xref py py-obj docutils literal"><span class="pre">query_typed</span></code></a></td>
<td>Performs aggregation queries over columns of the table, and returns Python object(s) and types.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#hail.KeyTable.rename" title="hail.KeyTable.rename"><code class="xref py py-obj docutils literal"><span class="pre">rename</span></code></a></td>
<td>Rename columns of key table.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#hail.KeyTable.same" title="hail.KeyTable.same"><code class="xref py py-obj docutils literal"><span class="pre">same</span></code></a></td>
<td>Test whether two key tables are identical.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#hail.KeyTable.select" title="hail.KeyTable.select"><code class="xref py py-obj docutils literal"><span class="pre">select</span></code></a></td>
<td>Select a subset of columns.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#hail.KeyTable.to_dataframe" title="hail.KeyTable.to_dataframe"><code class="xref py py-obj docutils literal"><span class="pre">to_dataframe</span></code></a></td>
<td>Converts this key table to a Spark DataFrame.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#hail.KeyTable.to_pandas" title="hail.KeyTable.to_pandas"><code class="xref py py-obj docutils literal"><span class="pre">to_pandas</span></code></a></td>
<td>Converts this key table into a Pandas DataFrame.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#hail.KeyTable.write" title="hail.KeyTable.write"><code class="xref py py-obj docutils literal"><span class="pre">write</span></code></a></td>
<td>Write as KT file.</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="hail.KeyTable.aggregate_by_key">
<code class="descname">aggregate_by_key</code><span class="sig-paren">(</span><em>key_expr</em>, <em>agg_expr</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/hail/keytable.html#KeyTable.aggregate_by_key"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#hail.KeyTable.aggregate_by_key" title="Permalink to this definition">¶</a></dt>
<dd><p>Group by key condition and aggregate results.</p>
<p><strong>Examples</strong></p>
<p>Compute mean height by sex:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">kt_ht_by_sex</span> <span class="o">=</span> <span class="n">kt1</span><span class="o">.</span><span class="n">aggregate_by_key</span><span class="p">(</span><span class="s2">&quot;SEX = SEX&quot;</span><span class="p">,</span> <span class="s2">&quot;MEAN_HT = HT.stats().mean&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>The result of <a class="reference internal" href="#hail.KeyTable.aggregate_by_key" title="hail.KeyTable.aggregate_by_key"><code class="xref py py-meth docutils literal"><span class="pre">aggregate_by_key()</span></code></a> is a key table <code class="docutils literal"><span class="pre">kt_ht_by_sex</span></code> with the following data:</p>
<table border="1" class="docutils">
<colgroup>
<col width="44%" />
<col width="56%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">SEX</th>
<th class="head">MEAN_HT</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>M</td>
<td>68.5</td>
</tr>
<tr class="row-odd"><td>F</td>
<td>65</td>
</tr>
</tbody>
</table>
<p><strong>Notes</strong></p>
<p>The scope for both <code class="docutils literal"><span class="pre">key_expr</span></code> and <code class="docutils literal"><span class="pre">agg_expr</span></code> is all column names in the input <a class="reference internal" href="#hail.KeyTable" title="hail.KeyTable"><code class="xref py py-class docutils literal"><span class="pre">KeyTable</span></code></a>.</p>
<p>For more information, see the documentation on writing <a class="reference internal" href="overview.html#overview-expressions"><span class="std std-ref">expressions</span></a>
and using the <a class="reference external" href="https://hail.is/expr_lang.html">Hail Expression Language</a></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>key_expr</strong> (<em>str</em><em> or </em><em>list of str</em>) &#8211; Named expression(s) for how to compute the keys of the new key table.</li>
<li><strong>agg_expr</strong> (<em>str</em><em> or </em><em>list of str</em>) &#8211; Named aggregation expression(s).</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">A new key table with the keys computed from the <code class="docutils literal"><span class="pre">key_expr</span></code> and the remaining columns computed from the <code class="docutils literal"><span class="pre">agg_expr</span></code>.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference internal" href="#hail.KeyTable" title="hail.KeyTable"><code class="xref py py-class docutils literal"><span class="pre">KeyTable</span></code></a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="hail.KeyTable.annotate">
<code class="descname">annotate</code><span class="sig-paren">(</span><em>expr</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/hail/keytable.html#KeyTable.annotate"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#hail.KeyTable.annotate" title="Permalink to this definition">¶</a></dt>
<dd><p>Add new columns computed from existing columns.</p>
<p><strong>Examples</strong></p>
<p>Add new column <code class="docutils literal"><span class="pre">Y</span></code> which is equal to 5 times <code class="docutils literal"><span class="pre">X</span></code>:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">kt_result</span> <span class="o">=</span> <span class="n">kt1</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span><span class="s2">&quot;Y = 5 * X&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Notes</strong></p>
<p>The scope for <code class="docutils literal"><span class="pre">expr</span></code> is all column names in the input <a class="reference internal" href="#hail.KeyTable" title="hail.KeyTable"><code class="xref py py-class docutils literal"><span class="pre">KeyTable</span></code></a>.</p>
<p>For more information, see the documentation on writing <a class="reference external" href="../overview.html#expressions">expressions</a>
and using the <a class="reference external" href="../reference.html#HailExpressionLanguage">Hail Expression Language</a>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>expr</strong> (<em>str</em><em> or </em><em>list of str</em>) &#8211; Annotation expression or multiple annotation expressions.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">Key table with new columns specified by <code class="docutils literal"><span class="pre">expr</span></code>.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference internal" href="#hail.KeyTable" title="hail.KeyTable"><code class="xref py py-class docutils literal"><span class="pre">KeyTable</span></code></a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="hail.KeyTable.cache">
<code class="descname">cache</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/hail/keytable.html#KeyTable.cache"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#hail.KeyTable.cache" title="Permalink to this definition">¶</a></dt>
<dd><p>Mark this key table to be cached in memory.</p>
<p><a class="reference internal" href="#hail.KeyTable.cache" title="hail.KeyTable.cache"><code class="xref py py-meth docutils literal"><span class="pre">cache()</span></code></a> is the same as <a class="reference internal" href="#hail.KeyTable.persist" title="hail.KeyTable.persist"><code class="xref py py-func docutils literal"><span class="pre">persist(&quot;MEMORY_ONLY&quot;)</span></code></a>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference internal" href="#hail.KeyTable" title="hail.KeyTable"><code class="xref py py-class docutils literal"><span class="pre">KeyTable</span></code></a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="hail.KeyTable.collect">
<code class="descname">collect</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/hail/keytable.html#KeyTable.collect"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#hail.KeyTable.collect" title="Permalink to this definition">¶</a></dt>
<dd><p>Collect key table as a Python object.</p>
</dd></dl>

<dl class="attribute">
<dt id="hail.KeyTable.column_names">
<code class="descname">column_names</code><a class="headerlink" href="#hail.KeyTable.column_names" title="Permalink to this definition">¶</a></dt>
<dd><p>Names of all columns.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">kt1</span><span class="o">.</span><span class="n">column_names</span>
<span class="go">[u&#39;ID&#39;, u&#39;HT&#39;, u&#39;SEX&#39;, u&#39;X&#39;, u&#39;Z&#39;, u&#39;C1&#39;, u&#39;C2&#39;, u&#39;C3&#39;]</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">list of str</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="hail.KeyTable.count_rows">
<code class="descname">count_rows</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/hail/keytable.html#KeyTable.count_rows"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#hail.KeyTable.count_rows" title="Permalink to this definition">¶</a></dt>
<dd><p>Number of rows.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">kt1</span><span class="o">.</span><span class="n">count_rows</span><span class="p">()</span>
<span class="go">4L</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">long</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="hail.KeyTable.exists">
<code class="descname">exists</code><span class="sig-paren">(</span><em>code</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/hail/keytable.html#KeyTable.exists"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#hail.KeyTable.exists" title="Permalink to this definition">¶</a></dt>
<dd><p>Test whether a condition is true for at least one row.</p>
<p><strong>Examples</strong></p>
<p>Test whether any row in the key table has the value of <code class="docutils literal"><span class="pre">C1</span></code> equal to 5:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">if</span> <span class="n">kt1</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="s2">&quot;C1 == 5&quot;</span><span class="p">):</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;At least one row has C1 equal 5.&quot;</span><span class="p">)</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>code</strong> (<em>str</em>) &#8211; Boolean expression.</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">bool</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="hail.KeyTable.expand_types">
<code class="descname">expand_types</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/hail/keytable.html#KeyTable.expand_types"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#hail.KeyTable.expand_types" title="Permalink to this definition">¶</a></dt>
<dd><p>Expand types Locus, Interval, AltAllele, Variant, Genotype, Char,
Set and Dict.  Char is converted to String.  Set is converted
to Array.  Dict[K, V] is converted to</p>
<div class="highlight-text"><div class="highlight"><pre><span></span>Array[Struct {
    key: K
    value: V
}]
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">key table with signature containing only types:
Boolean, Int, Long, Float, Double, Array and Struct</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference internal" href="#hail.KeyTable" title="hail.KeyTable"><code class="xref py py-class docutils literal"><span class="pre">KeyTable</span></code></a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="hail.KeyTable.explode">
<code class="descname">explode</code><span class="sig-paren">(</span><em>column_names</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/hail/keytable.html#KeyTable.explode"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#hail.KeyTable.explode" title="Permalink to this definition">¶</a></dt>
<dd><p>Explode columns of this key table.</p>
<p>The explode operation unpacks the elements in a column of type <code class="docutils literal"><span class="pre">Array</span></code> or <code class="docutils literal"><span class="pre">Set</span></code> into its own row.
If an empty <code class="docutils literal"><span class="pre">Array</span></code> or <code class="docutils literal"><span class="pre">Set</span></code> is exploded, the entire row is removed from the <a class="reference internal" href="#hail.KeyTable" title="hail.KeyTable"><code class="xref py py-class docutils literal"><span class="pre">KeyTable</span></code></a>.</p>
<p><strong>Examples</strong></p>
<p>Assume <code class="docutils literal"><span class="pre">kt3</span></code> is a <a class="reference internal" href="#hail.KeyTable" title="hail.KeyTable"><code class="xref py py-class docutils literal"><span class="pre">KeyTable</span></code></a> with three columns: c1, c2 and
c3.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">kt3</span> <span class="o">=</span> <span class="n">hc</span><span class="o">.</span><span class="n">import_keytable</span><span class="p">(</span><span class="s1">&#39;data/kt_example3.tsv&#39;</span><span class="p">,</span>
<span class="gp">... </span>  <span class="n">config</span><span class="o">=</span><span class="n">TextTableConfig</span><span class="p">(</span><span class="n">impute</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">types</span><span class="o">=</span><span class="s1">&#39;c1:String,c2:Array[Int],c3:Array[Array[Int]]&#39;</span><span class="p">))</span>
</pre></div>
</div>
<p>The types of each column are <code class="docutils literal"><span class="pre">String</span></code>, <code class="docutils literal"><span class="pre">Array[Int]</span></code>, and <code class="docutils literal"><span class="pre">Array[Array[Int]]</span></code> respectively.
c1 cannot be exploded because its type is not an <code class="docutils literal"><span class="pre">Array</span></code> or <code class="docutils literal"><span class="pre">Set</span></code>.
c2 can only be exploded once because the type of c2 after the first explode operation is <code class="docutils literal"><span class="pre">Int</span></code>.</p>
<table border="1" class="docutils">
<colgroup>
<col width="13%" />
<col width="33%" />
<col width="53%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">c1</th>
<th class="head">c2</th>
<th class="head">c3</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>a</td>
<td>[1,2,NA]</td>
<td>[[3,4], []]</td>
</tr>
</tbody>
</table>
<p>Explode c2:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">kt3</span><span class="o">.</span><span class="n">explode</span><span class="p">(</span><span class="s1">&#39;c2&#39;</span><span class="p">)</span>
</pre></div>
</div>
<table border="1" class="docutils">
<colgroup>
<col width="14%" />
<col width="25%" />
<col width="61%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">c1</th>
<th class="head">c2</th>
<th class="head">c3</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>a</td>
<td>1</td>
<td>[[3,4], []]</td>
</tr>
<tr class="row-odd"><td>a</td>
<td>2</td>
<td>[[3,4], []]</td>
</tr>
</tbody>
</table>
<p>Explode c2 once and c3 twice:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">kt3</span><span class="o">.</span><span class="n">explode</span><span class="p">([</span><span class="s1">&#39;c2&#39;</span><span class="p">,</span> <span class="s1">&#39;c3&#39;</span><span class="p">,</span> <span class="s1">&#39;c3&#39;</span><span class="p">])</span>
</pre></div>
</div>
<table border="1" class="docutils">
<colgroup>
<col width="17%" />
<col width="29%" />
<col width="54%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">c1</th>
<th class="head">c2</th>
<th class="head">c3</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>a</td>
<td>1</td>
<td>3</td>
</tr>
<tr class="row-odd"><td>a</td>
<td>2</td>
<td>3</td>
</tr>
<tr class="row-even"><td>a</td>
<td>1</td>
<td>4</td>
</tr>
<tr class="row-odd"><td>a</td>
<td>2</td>
<td>4</td>
</tr>
</tbody>
</table>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>column_names</strong> (<em>str</em><em> or </em><em>list of str</em>) &#8211; Column name(s) to be exploded.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">Key table with columns exploded.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference internal" href="#hail.KeyTable" title="hail.KeyTable"><code class="xref py py-class docutils literal"><span class="pre">KeyTable</span></code></a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="hail.KeyTable.export">
<code class="descname">export</code><span class="sig-paren">(</span><em>output</em>, <em>types_file=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/hail/keytable.html#KeyTable.export"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#hail.KeyTable.export" title="Permalink to this definition">¶</a></dt>
<dd><p>Export to a TSV file.</p>
<p><strong>Examples</strong></p>
<p>Rename column names of key table and export to file:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="p">(</span><span class="n">kt1</span><span class="o">.</span><span class="n">rename</span><span class="p">({</span><span class="s1">&#39;HT&#39;</span> <span class="p">:</span> <span class="s1">&#39;Height&#39;</span><span class="p">})</span>
<span class="gp">... </span>    <span class="o">.</span><span class="n">export</span><span class="p">(</span><span class="s2">&quot;output/kt1_renamed.tsv&quot;</span><span class="p">))</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>output</strong> (<em>str</em>) &#8211; Output file path.</li>
<li><strong>types_file</strong> (<em>str</em>) &#8211; Output path of types file.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="hail.KeyTable.export_cassandra">
<code class="descname">export_cassandra</code><span class="sig-paren">(</span><em>address</em>, <em>keyspace</em>, <em>table</em>, <em>block_size=100</em>, <em>rate=1000</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/hail/keytable.html#KeyTable.export_cassandra"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#hail.KeyTable.export_cassandra" title="Permalink to this definition">¶</a></dt>
<dd><p>Export to Cassandra.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last"><a class="reference internal" href="#hail.KeyTable.export_cassandra" title="hail.KeyTable.export_cassandra"><code class="xref py py-meth docutils literal"><span class="pre">export_cassandra()</span></code></a> is EXPERIMENTAL.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="hail.KeyTable.export_mongodb">
<code class="descname">export_mongodb</code><span class="sig-paren">(</span><em>mode='append'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/hail/keytable.html#KeyTable.export_mongodb"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#hail.KeyTable.export_mongodb" title="Permalink to this definition">¶</a></dt>
<dd><p>Export to MongoDB</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last"><a class="reference internal" href="#hail.KeyTable.export_mongodb" title="hail.KeyTable.export_mongodb"><code class="xref py py-meth docutils literal"><span class="pre">export_mongodb()</span></code></a> is EXPERIMENTAL.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="hail.KeyTable.export_solr">
<code class="descname">export_solr</code><span class="sig-paren">(</span><em>zk_host</em>, <em>collection</em>, <em>block_size=100</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/hail/keytable.html#KeyTable.export_solr"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#hail.KeyTable.export_solr" title="Permalink to this definition">¶</a></dt>
<dd><p>Export to Solr.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last"><a class="reference internal" href="#hail.KeyTable.export_solr" title="hail.KeyTable.export_solr"><code class="xref py py-meth docutils literal"><span class="pre">export_solr()</span></code></a> is EXPERIMENTAL.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="hail.KeyTable.filter">
<code class="descname">filter</code><span class="sig-paren">(</span><em>condition</em>, <em>keep=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/hail/keytable.html#KeyTable.filter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#hail.KeyTable.filter" title="Permalink to this definition">¶</a></dt>
<dd><p>Filter rows.</p>
<p><strong>Examples</strong></p>
<p>Keep rows where <code class="docutils literal"><span class="pre">C1</span></code> equals 5:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">kt_result</span> <span class="o">=</span> <span class="n">kt1</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="s2">&quot;C1 == 5&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Remove rows where <code class="docutils literal"><span class="pre">C1</span></code> equals 10:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">kt_result</span> <span class="o">=</span> <span class="n">kt1</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="s2">&quot;C1 == 10&quot;</span><span class="p">,</span> <span class="n">keep</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Notes</strong></p>
<p>The scope for <code class="docutils literal"><span class="pre">condition</span></code> is all column names in the input <a class="reference internal" href="#hail.KeyTable" title="hail.KeyTable"><code class="xref py py-class docutils literal"><span class="pre">KeyTable</span></code></a>.</p>
<p>For more information, see the documentation on writing <a class="reference external" href="../overview.html#expressions">expressions</a>
and using the <a class="reference external" href="../reference.html#HailExpressionLanguage">Hail Expression Language</a>.</p>
<div class="admonition caution">
<p class="first admonition-title">Caution</p>
<p class="last">When <code class="docutils literal"><span class="pre">condition</span></code> evaluates to missing, the row will be removed regardless of whether <code class="docutils literal"><span class="pre">keep=True</span></code> or <code class="docutils literal"><span class="pre">keep=False</span></code>.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>condition</strong> (<em>str</em>) &#8211; Annotation expression.</li>
<li><strong>keep</strong> (<em>bool</em>) &#8211; Keep rows where <code class="docutils literal"><span class="pre">condition</span></code> evaluates to True.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">Key table whose rows have been filtered by evaluating <code class="docutils literal"><span class="pre">condition</span></code>.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference internal" href="#hail.KeyTable" title="hail.KeyTable"><code class="xref py py-class docutils literal"><span class="pre">KeyTable</span></code></a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="hail.KeyTable.flatten">
<code class="descname">flatten</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/hail/keytable.html#KeyTable.flatten"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#hail.KeyTable.flatten" title="Permalink to this definition">¶</a></dt>
<dd><p>Flatten nested Structs.  Column names will be concatenated with dot
(.).</p>
<p><strong>Examples</strong></p>
<p>Flatten Structs in key table:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">kt_result</span> <span class="o">=</span> <span class="n">kt3</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>
</pre></div>
</div>
<p>Consider a key table <code class="docutils literal"><span class="pre">kt</span></code> with signature</p>
<div class="highlight-text"><div class="highlight"><pre><span></span>a: Struct {
    p: Int
    q: Double
}
b: Int
c: Struct {
    x: String
    y: Array[Struct {
    z: Map[Int]
    }]
}
</pre></div>
</div>
<p>and a single key column <code class="docutils literal"><span class="pre">a</span></code>.  The result of flatten is</p>
<div class="highlight-text"><div class="highlight"><pre><span></span>a.p: Int
a.q: Double
b: Int
c.x: String
c.y: Array[Struct {
    z: Map[Int]
}]
</pre></div>
</div>
<p>with key columns <code class="docutils literal"><span class="pre">a.p,</span> <span class="pre">a.q</span></code>.</p>
<p>Note, structures inside non-struct types will not be
flattened.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">Key table with no columns of type Struct.</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference internal" href="#hail.KeyTable" title="hail.KeyTable"><code class="xref py py-class docutils literal"><span class="pre">KeyTable</span></code></a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="hail.KeyTable.forall">
<code class="descname">forall</code><span class="sig-paren">(</span><em>code</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/hail/keytable.html#KeyTable.forall"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#hail.KeyTable.forall" title="Permalink to this definition">¶</a></dt>
<dd><p>Test whether a condition is true for all rows.</p>
<p><strong>Examples</strong></p>
<p>Test whether all rows in the key table have the value of <code class="docutils literal"><span class="pre">C1</span></code> equal to 5:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">if</span> <span class="n">kt1</span><span class="o">.</span><span class="n">forall</span><span class="p">(</span><span class="s2">&quot;C1 == 5&quot;</span><span class="p">):</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;All rows have C1 equal 5.&quot;</span><span class="p">)</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>code</strong> (<em>str</em>) &#8211; Boolean expression.</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">bool</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="staticmethod">
<dt id="hail.KeyTable.from_py">
<em class="property">static </em><code class="descname">from_py</code><span class="sig-paren">(</span><em>hc</em>, <em>rows_py</em>, <em>schema</em>, <em>key_names=[]</em>, <em>npartitions=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/hail/keytable.html#KeyTable.from_py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#hail.KeyTable.from_py" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="hail.KeyTable.join">
<code class="descname">join</code><span class="sig-paren">(</span><em>right</em>, <em>how='inner'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/hail/keytable.html#KeyTable.join"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#hail.KeyTable.join" title="Permalink to this definition">¶</a></dt>
<dd><p>Join two key tables together.</p>
<p><strong>Examples</strong></p>
<p>Join <code class="docutils literal"><span class="pre">kt1</span></code> to <code class="docutils literal"><span class="pre">kt2</span></code> to produce <code class="docutils literal"><span class="pre">kt_joined</span></code>:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">kt_result</span> <span class="o">=</span> <span class="n">kt1</span><span class="o">.</span><span class="n">key_by</span><span class="p">(</span><span class="s1">&#39;ID&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">kt2</span><span class="o">.</span><span class="n">key_by</span><span class="p">(</span><span class="s1">&#39;ID&#39;</span><span class="p">))</span>
</pre></div>
</div>
<p><strong>Notes:</strong></p>
<p>Hail supports four types of joins specified by <code class="docutils literal"><span class="pre">how</span></code>:</p>
<blockquote>
<div><ul class="simple">
<li><strong>inner</strong> &#8211; Key must be present in both <code class="docutils literal"><span class="pre">kt1</span></code> and <code class="docutils literal"><span class="pre">kt2</span></code>.</li>
<li><strong>outer</strong> &#8211; Key present in <code class="docutils literal"><span class="pre">kt1</span></code> or <code class="docutils literal"><span class="pre">kt2</span></code>. For keys only in <code class="docutils literal"><span class="pre">kt1</span></code>, the value of non-key columns from <code class="docutils literal"><span class="pre">kt2</span></code> is set to missing.
Likewise, for keys only in <code class="docutils literal"><span class="pre">kt2</span></code>, the value of non-key columns from <code class="docutils literal"><span class="pre">kt1</span></code> is set to missing.</li>
<li><strong>left</strong> &#8211; Key present in <code class="docutils literal"><span class="pre">kt1</span></code>. For keys only in <code class="docutils literal"><span class="pre">kt1</span></code>, the value of non-key columns from <code class="docutils literal"><span class="pre">kt2</span></code> is set to missing.</li>
<li><strong>right</strong> &#8211; Key present in <code class="docutils literal"><span class="pre">kt2</span></code>. For keys only in <code class="docutils literal"><span class="pre">kt2</span></code>, the value of non-key columns from <code class="docutils literal"><span class="pre">kt1</span></code> is set to missing.</li>
</ul>
</div></blockquote>
<p>The non-key fields in <code class="docutils literal"><span class="pre">kt2</span></code> must have non-overlapping column names with <code class="docutils literal"><span class="pre">kt1</span></code>.</p>
<p>Both key tables must have the same number of keys and the corresponding types of each key must be the same (order matters), but the key names can be different.
For example, if <code class="docutils literal"><span class="pre">kt1</span></code> has the key schema <code class="docutils literal"><span class="pre">Struct{(&quot;a&quot;,</span> <span class="pre">Int),</span> <span class="pre">(&quot;b&quot;,</span> <span class="pre">String)}</span></code>, <code class="docutils literal"><span class="pre">kt1</span></code> can be merged with a key table that has a key schema equal to
<code class="docutils literal"><span class="pre">Struct{(&quot;b&quot;,</span> <span class="pre">Int),</span> <span class="pre">(&quot;c&quot;,</span> <span class="pre">String)}</span></code> but cannot be merged to a key table with key schema <code class="docutils literal"><span class="pre">Struct{(&quot;b&quot;,</span> <span class="pre">&quot;String&quot;),</span> <span class="pre">(&quot;a&quot;,</span> <span class="pre">Int)}</span></code>. <code class="docutils literal"><span class="pre">kt_joined</span></code> will have the same key names and schema as <code class="docutils literal"><span class="pre">kt1</span></code>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>right</strong> (<a class="reference internal" href="#hail.KeyTable" title="hail.KeyTable"><code class="xref py py-class docutils literal"><span class="pre">KeyTable</span></code></a>) &#8211; Key table to join</li>
<li><strong>how</strong> (<em>str</em>) &#8211; Method for joining two tables together. One of &#8220;inner&#8221;, &#8220;outer&#8221;, &#8220;left&#8221;, &#8220;right&#8221;.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">Key table that results from joining this key table with another.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference internal" href="#hail.KeyTable" title="hail.KeyTable"><code class="xref py py-class docutils literal"><span class="pre">KeyTable</span></code></a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="hail.KeyTable.key">
<code class="descname">key</code><a class="headerlink" href="#hail.KeyTable.key" title="Permalink to this definition">¶</a></dt>
<dd><p>List of key column names.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">kt1</span><span class="o">.</span><span class="n">key</span>
<span class="go">[u&#39;ID&#39;]</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">list of str</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="hail.KeyTable.key_by">
<code class="descname">key_by</code><span class="sig-paren">(</span><em>key</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/hail/keytable.html#KeyTable.key_by"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#hail.KeyTable.key_by" title="Permalink to this definition">¶</a></dt>
<dd><p>Change which columns are keys.</p>
<p><strong>Examples</strong></p>
<p>Assume <code class="docutils literal"><span class="pre">kt</span></code> is a <a class="reference internal" href="#hail.KeyTable" title="hail.KeyTable"><code class="xref py py-class docutils literal"><span class="pre">KeyTable</span></code></a> with three columns: c1, c2 and
c3 and key c1.</p>
<p>Change key columns:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">kt_result</span> <span class="o">=</span> <span class="n">kt1</span><span class="o">.</span><span class="n">key_by</span><span class="p">([</span><span class="s1">&#39;C2&#39;</span><span class="p">,</span> <span class="s1">&#39;C3&#39;</span><span class="p">])</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">kt_result</span> <span class="o">=</span> <span class="n">kt1</span><span class="o">.</span><span class="n">key_by</span><span class="p">(</span><span class="s1">&#39;C2&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Set to no keys:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">kt_result</span> <span class="o">=</span> <span class="n">kt1</span><span class="o">.</span><span class="n">key_by</span><span class="p">([])</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>key</strong> (<em>str</em><em> or </em><em>list of str</em>) &#8211; List of columns to be used as keys.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">Key table whose key columns are given by <code class="docutils literal"><span class="pre">key</span></code>.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference internal" href="#hail.KeyTable" title="hail.KeyTable"><code class="xref py py-class docutils literal"><span class="pre">KeyTable</span></code></a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="hail.KeyTable.num_columns">
<code class="descname">num_columns</code><a class="headerlink" href="#hail.KeyTable.num_columns" title="Permalink to this definition">¶</a></dt>
<dd><p>Number of columns.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">kt1</span><span class="o">.</span><span class="n">num_columns</span>
<span class="go">8</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">int</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="hail.KeyTable.order_by">
<code class="descname">order_by</code><span class="sig-paren">(</span><em>*cols</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/hail/keytable.html#KeyTable.order_by"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#hail.KeyTable.order_by" title="Permalink to this definition">¶</a></dt>
<dd><p>Sort by the specified columns.  Missing values are sorted after non-missing values.  Sort by the first column, then the second, etc.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>cols</strong> &#8211; Columns to sort by.</td>
</tr>
<tr class="field-even field"><th class="field-name">Type:</th><td class="field-body">str or asc(str) or desc(str)</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">Key table sorted by <code class="docutils literal"><span class="pre">cols</span></code>.</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference internal" href="#hail.KeyTable" title="hail.KeyTable"><code class="xref py py-class docutils literal"><span class="pre">KeyTable</span></code></a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="hail.KeyTable.persist">
<code class="descname">persist</code><span class="sig-paren">(</span><em>storage_level='MEMORY_AND_DISK'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/hail/keytable.html#KeyTable.persist"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#hail.KeyTable.persist" title="Permalink to this definition">¶</a></dt>
<dd><p>Persist this key table to memory and/or disk.</p>
<p><strong>Examples</strong></p>
<p>Persist the key table to both memory and disk:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">kt</span> <span class="o">=</span> <span class="n">kt</span><span class="o">.</span><span class="n">persist</span><span class="p">()</span> 
</pre></div>
</div>
<p><strong>Notes</strong></p>
<p>The <a class="reference internal" href="#hail.KeyTable.persist" title="hail.KeyTable.persist"><code class="xref py py-meth docutils literal"><span class="pre">persist()</span></code></a> and <a class="reference internal" href="#hail.KeyTable.cache" title="hail.KeyTable.cache"><code class="xref py py-meth docutils literal"><span class="pre">cache()</span></code></a> methods 
allow you to store the current table on disk or in memory to avoid redundant computation and 
improve the performance of Hail pipelines.</p>
<p><a class="reference internal" href="#hail.KeyTable.cache" title="hail.KeyTable.cache"><code class="xref py py-meth docutils literal"><span class="pre">cache()</span></code></a> is an alias for 
<a class="reference internal" href="#hail.KeyTable.persist" title="hail.KeyTable.persist"><code class="xref py py-func docutils literal"><span class="pre">persist(&quot;MEMORY_ONLY&quot;)</span></code></a>.  Most users will want &#8220;MEMORY_AND_DISK&#8221;.
See the <a class="reference external" href="http://spark.apache.org/docs/latest/programming-guide.html#rdd-persistence">Spark documentation</a> 
for a more in-depth discussion of persisting data.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>storage_level</strong> &#8211; Storage level.  One of: NONE, DISK_ONLY,
DISK_ONLY_2, MEMORY_ONLY, MEMORY_ONLY_2, MEMORY_ONLY_SER,
MEMORY_ONLY_SER_2, MEMORY_AND_DISK, MEMORY_AND_DISK_2,
MEMORY_AND_DISK_SER, MEMORY_AND_DISK_SER_2, OFF_HEAP</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference internal" href="#hail.KeyTable" title="hail.KeyTable"><code class="xref py py-class docutils literal"><span class="pre">KeyTable</span></code></a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="hail.KeyTable.query">
<code class="descname">query</code><span class="sig-paren">(</span><em>exprs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/hail/keytable.html#KeyTable.query"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#hail.KeyTable.query" title="Permalink to this definition">¶</a></dt>
<dd><p>Performs aggregation queries over columns of the table, and returns Python object(s).</p>
<p><strong>Examples</strong></p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">mean_value</span> <span class="o">=</span> <span class="n">kt1</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s1">&#39;C1.stats().mean&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="p">[</span><span class="n">hist</span><span class="p">,</span> <span class="n">counter</span><span class="p">]</span> <span class="o">=</span> <span class="n">kt1</span><span class="o">.</span><span class="n">query</span><span class="p">([</span><span class="s1">&#39;HT.hist(50, 80, 10)&#39;</span><span class="p">,</span> <span class="s1">&#39;SEX.counter()&#39;</span><span class="p">])</span>
</pre></div>
</div>
<p><strong>Notes</strong></p>
<p>This method evaluates Hail expressions over the rows of the key table.
The <code class="docutils literal"><span class="pre">exprs</span></code> argument requires either a single string or a list of
strings. If a single string was passed, then a single result is
returned. If a list is passed, a list is returned.</p>
<p>The namespace of the expressions includes one aggregable for each column
of the key table. We use the example <code class="docutils literal"><span class="pre">kt1</span></code> here, which contains columns
<code class="docutils literal"><span class="pre">ID</span></code>, <code class="docutils literal"><span class="pre">HT</span></code>, <code class="docutils literal"><span class="pre">Sex</span></code>, <code class="docutils literal"><span class="pre">X</span></code>, <code class="docutils literal"><span class="pre">Z</span></code>, <code class="docutils literal"><span class="pre">C1</span></code>, <code class="docutils literal"><span class="pre">C2</span></code>, and <code class="docutils literal"><span class="pre">C3</span></code>. Queries
in this key table will contain the following namespace:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">ID</span></code>: (<em>Aggregable[Int]</em>)</li>
<li><code class="docutils literal"><span class="pre">HT</span></code>: (<em>Aggregable[Int]</em>)</li>
<li><code class="docutils literal"><span class="pre">SEX</span></code>: (<em>Aggregable[String]</em>)</li>
<li><code class="docutils literal"><span class="pre">X</span></code>: (<em>Aggregable[Int]</em>)</li>
<li><code class="docutils literal"><span class="pre">Z</span></code>: (<em>Aggregable[Int]</em>)</li>
<li><code class="docutils literal"><span class="pre">C1</span></code>: (<em>Aggregable[Int]</em>)</li>
<li><code class="docutils literal"><span class="pre">C2</span></code>: (<em>Aggregable[Int]</em>)</li>
<li><code class="docutils literal"><span class="pre">C3</span></code>: (<em>Aggregable[Int]</em>)</li>
</ul>
<p>Map and filter expressions on these aggregables have the same additional
scope, which is all the columns in the key table. In our example, this
includes:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">ID</span></code>: (<em>Int</em>)</li>
<li><code class="docutils literal"><span class="pre">HT</span></code>: (<em>Int</em>)</li>
<li><code class="docutils literal"><span class="pre">SEX</span></code>: (<em>String</em>)</li>
<li><code class="docutils literal"><span class="pre">X</span></code>: (<em>Int</em>)</li>
<li><code class="docutils literal"><span class="pre">Z</span></code>: (<em>Int</em>)</li>
<li><code class="docutils literal"><span class="pre">C1</span></code>: (<em>Int</em>)</li>
<li><code class="docutils literal"><span class="pre">C2</span></code>: (<em>Int</em>)</li>
<li><code class="docutils literal"><span class="pre">C3</span></code>: (<em>Int</em>)</li>
</ul>
<p>This scope means that operations like the below are permitted:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">fraction_tall_male</span> <span class="o">=</span> <span class="n">kt1</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s1">&#39;HT.filter(x =&gt; SEX == &quot;M&quot;).fraction(x =&gt; x &gt; 70)&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ids</span> <span class="o">=</span> <span class="n">kt1</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s1">&#39;ID.filter(x =&gt; C2 &lt; C3).collect()&#39;</span><span class="p">)</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>exprs</strong> (<em>str</em><em> or </em><em>list of str</em>) &#8211; </td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">annotation or list of annotation</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="hail.KeyTable.query_typed">
<code class="descname">query_typed</code><span class="sig-paren">(</span><em>exprs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/hail/keytable.html#KeyTable.query_typed"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#hail.KeyTable.query_typed" title="Permalink to this definition">¶</a></dt>
<dd><p>Performs aggregation queries over columns of the table, and returns Python object(s) and types.</p>
<p><strong>Examples</strong></p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">mean_value</span><span class="p">,</span> <span class="n">t</span> <span class="o">=</span> <span class="n">kt1</span><span class="o">.</span><span class="n">query_typed</span><span class="p">(</span><span class="s1">&#39;C1.stats().mean&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="p">[</span><span class="n">hist</span><span class="p">,</span> <span class="n">counter</span><span class="p">],</span> <span class="p">[</span><span class="n">t1</span><span class="p">,</span> <span class="n">t2</span><span class="p">]</span> <span class="o">=</span> <span class="n">kt1</span><span class="o">.</span><span class="n">query_typed</span><span class="p">([</span><span class="s1">&#39;HT.hist(50, 80, 10)&#39;</span><span class="p">,</span> <span class="s1">&#39;SEX.counter()&#39;</span><span class="p">])</span>
</pre></div>
</div>
<p>See <code class="xref py py-meth docutils literal"><span class="pre">Keytable.query()</span></code> for more information.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>exprs</strong> (<em>str</em><em> or </em><em>list of str</em>) &#8211; </td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">(annotation or list of annotation,  <a class="reference internal" href="expr/hail.expr.Type.html#hail.expr.Type" title="hail.expr.Type"><code class="xref py py-class docutils literal"><span class="pre">Type</span></code></a> or list of <a class="reference internal" href="expr/hail.expr.Type.html#hail.expr.Type" title="hail.expr.Type"><code class="xref py py-class docutils literal"><span class="pre">Type</span></code></a>)</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="hail.KeyTable.rename">
<code class="descname">rename</code><span class="sig-paren">(</span><em>column_names</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/hail/keytable.html#KeyTable.rename"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#hail.KeyTable.rename" title="Permalink to this definition">¶</a></dt>
<dd><p>Rename columns of key table.</p>
<p><code class="docutils literal"><span class="pre">column_names</span></code> can be either a list of new names or a dict
mapping old names to new names.  If <code class="docutils literal"><span class="pre">column_names</span></code> is a list,
its length must be the number of columns in this <a class="reference internal" href="#hail.KeyTable" title="hail.KeyTable"><code class="xref py py-class docutils literal"><span class="pre">KeyTable</span></code></a>.</p>
<p><strong>Examples</strong></p>
<p>Rename using a list:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">kt2</span><span class="o">.</span><span class="n">rename</span><span class="p">([</span><span class="s1">&#39;newColumn1&#39;</span><span class="p">,</span> <span class="s1">&#39;newColumn2&#39;</span><span class="p">,</span> <span class="s1">&#39;newColumn3&#39;</span><span class="p">])</span>
</pre></div>
</div>
<p>Rename using a dict:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">kt2</span><span class="o">.</span><span class="n">rename</span><span class="p">({</span><span class="s1">&#39;A&#39;</span> <span class="p">:</span> <span class="s1">&#39;C1&#39;</span><span class="p">})</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>column_names</strong> &#8211; list of new column names or a dict mapping old names to new names.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">Key table with renamed columns.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference internal" href="#hail.KeyTable" title="hail.KeyTable"><code class="xref py py-class docutils literal"><span class="pre">KeyTable</span></code></a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="hail.KeyTable.same">
<code class="descname">same</code><span class="sig-paren">(</span><em>other</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/hail/keytable.html#KeyTable.same"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#hail.KeyTable.same" title="Permalink to this definition">¶</a></dt>
<dd><p>Test whether two key tables are identical.</p>
<p><strong>Examples</strong></p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">if</span> <span class="n">kt1</span><span class="o">.</span><span class="n">same</span><span class="p">(</span><span class="n">kt2</span><span class="p">):</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;KeyTables are the same!&quot;</span><span class="p">)</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>other</strong> (<a class="reference internal" href="#hail.KeyTable" title="hail.KeyTable"><code class="xref py py-class docutils literal"><span class="pre">KeyTable</span></code></a>) &#8211; key table to compare against</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">bool</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="hail.KeyTable.schema">
<code class="descname">schema</code><a class="headerlink" href="#hail.KeyTable.schema" title="Permalink to this definition">¶</a></dt>
<dd><p>Key table schema.</p>
<p><strong>Example:</strong></p>
<p>Print the key table columns / signatures:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">kt1</span><span class="o">.</span><span class="n">schema</span><span class="p">)</span>
<span class="go">Struct {</span>
<span class="go">    ID: Int,</span>
<span class="go">    HT: Int,</span>
<span class="go">    SEX: String,</span>
<span class="go">    X: Int,</span>
<span class="go">    Z: Int,</span>
<span class="go">    C1: Int,</span>
<span class="go">    C2: Int,</span>
<span class="go">    C3: Int</span>
<span class="go">}</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference internal" href="expr/hail.expr.TStruct.html#hail.expr.TStruct" title="hail.expr.TStruct"><code class="xref py py-class docutils literal"><span class="pre">TStruct</span></code></a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="hail.KeyTable.select">
<code class="descname">select</code><span class="sig-paren">(</span><em>column_names</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/hail/keytable.html#KeyTable.select"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#hail.KeyTable.select" title="Permalink to this definition">¶</a></dt>
<dd><p>Select a subset of columns.</p>
<p><strong>Examples</strong></p>
<p>Assume <code class="docutils literal"><span class="pre">kt</span></code> is a <a class="reference internal" href="#hail.KeyTable" title="hail.KeyTable"><code class="xref py py-class docutils literal"><span class="pre">KeyTable</span></code></a> with three columns: C1, C2 and
C3.</p>
<p>Select/drop columns:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">kt_result</span> <span class="o">=</span> <span class="n">kt1</span><span class="o">.</span><span class="n">select</span><span class="p">([</span><span class="s1">&#39;C1&#39;</span><span class="p">])</span>
</pre></div>
</div>
<p>Reorder the columns:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">kt_result</span> <span class="o">=</span> <span class="n">kt1</span><span class="o">.</span><span class="n">select</span><span class="p">([</span><span class="s1">&#39;C3&#39;</span><span class="p">,</span> <span class="s1">&#39;C1&#39;</span><span class="p">,</span> <span class="s1">&#39;C2&#39;</span><span class="p">])</span>
</pre></div>
</div>
<p>Drop all columns:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">kt_result</span> <span class="o">=</span> <span class="n">kt1</span><span class="o">.</span><span class="n">select</span><span class="p">([])</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>column_names</strong> &#8211; List of columns to be selected.</td>
</tr>
<tr class="field-even field"><th class="field-name">Type:</th><td class="field-body">list of str</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">Key table with selected columns.</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference internal" href="#hail.KeyTable" title="hail.KeyTable"><code class="xref py py-class docutils literal"><span class="pre">KeyTable</span></code></a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="hail.KeyTable.to_dataframe">
<code class="descname">to_dataframe</code><span class="sig-paren">(</span><em>expand=True</em>, <em>flatten=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/hail/keytable.html#KeyTable.to_dataframe"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#hail.KeyTable.to_dataframe" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts this key table to a Spark DataFrame.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>expand</strong> (<em>bool</em>) &#8211; If true, expand_types before converting to
DataFrame.</li>
<li><strong>flatten</strong> (<em>bool</em>) &#8211; If true, flatten before converting to
DataFrame.  If both are true, flatten is run after expand so
that expanded types are flattened.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><code class="xref py py-class docutils literal"><span class="pre">pyspark.sql.DataFrame</span></code></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="hail.KeyTable.to_pandas">
<code class="descname">to_pandas</code><span class="sig-paren">(</span><em>expand=True</em>, <em>flatten=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/hail/keytable.html#KeyTable.to_pandas"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#hail.KeyTable.to_pandas" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts this key table into a Pandas DataFrame.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>expand</strong> (<em>bool</em>) &#8211; If true, expand_types before converting to
Pandas DataFrame.</li>
<li><strong>flatten</strong> (<em>bool</em>) &#8211; If true, flatten before converting to Pandas
DataFrame.  If both are true, flatten is run after expand so
that expanded types are flattened.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">Pandas DataFrame constructed from the key table.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><code class="xref py py-class docutils literal"><span class="pre">pandas.DataFrame</span></code></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="hail.KeyTable.write">
<code class="descname">write</code><span class="sig-paren">(</span><em>output</em>, <em>overwrite=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/hail/keytable.html#KeyTable.write"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#hail.KeyTable.write" title="Permalink to this definition">¶</a></dt>
<dd><p>Write as KT file.</p>
<p><strong>*Examples*</strong></p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">kt1</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;output/kt1.kt&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The write path must end in &#8221;.kt&#8221;.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>output</strong> (<em>str</em>) &#8211; Path of KT file to write.</li>
<li><strong>overwrite</strong> (<em>bool</em>) &#8211; If True, overwrite any existing KT file. Cannot be used 
to read from and write to the same path.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="hail.TextTableConfig.html" class="btn btn-neutral float-right" title="TextTableConfig" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="hail.VariantDataset.html" class="btn btn-neutral" title="VariantDataset" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016, Hail Team.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'devel',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
      <script type="text/javascript" src="../bootstrap.min.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
  
  
   

</body>
</html>