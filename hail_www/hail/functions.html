

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Functions &mdash; Hail</title>
  

  
  
    <link rel="shortcut icon" href="hail_logo_sq.png"/>
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="navbar.css" type="text/css" />
  
    <link rel="stylesheet" href="_static/rtd_modifications.css" type="text/css" />
  

  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="Hail" href="index.html"/>
        <link rel="up" title="Expression Language" href="exprlang.html"/>
        <link rel="next" title="Python API" href="api.html"/>
        <link rel="prev" title="Types" href="types.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>
  
  

</head>

<body class="wy-body-for-nav" role="document">

  <nav class="navbar navbar-default navbar-static-top" id="hail-navbar">
<div class="container-fluid" id="hail-container-fluid">
    <div class="navbar-header" id="hail-navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#hail-navbar-collapse" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
   
      <a class="navbar-left" id="hail-navbar-brand" href="../index.html"><img alt="Hail" id="logo" src="hail-logo-cropped.png"></a>

    </div>

    <div class="collapse navbar-collapse" id="hail-navbar-collapse">
      <ul class="nav navbar-nav navbar-right">
          <li id="home" class="nav-item"><a href="../index.html">HOME</a></li>
          <li id="docs" class="nav-item"><a href="index.html">DOCS</a></li>
          <li id="forum" class="nav-item"><a href="http://discuss.hail.is">FORUM</a></li>
          <li id="chat" class="nav-item dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">CHAT<span class="caret"></span></a>
          <ul class="dropdown-menu dropdown-menu-left">
            <li><a class="dropdown-item" href="https://gitter.im/hail-is/hail">General</a></li>
            <li><a class="dropdown-item" href="https://gitter.im/hail-is/hail-dev">Developers</a></li>
          </ul>
        </li>
       <li id="code" class="nav-item"><a href="https://github.com/hail-is/hail">CODE</a></li>
      </ul>
    </div>
  </div>
</nav>

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> Hail
          

          
          </a>

          
            
            
              <div class="version">
                devel
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="getting_started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial.html">Tutorial</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="exprlang.html">Expression Language</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="language_constructs.html">Language Constructs</a></li>
<li class="toctree-l2"><a class="reference internal" href="operators.html">Operators</a></li>
<li class="toctree-l2"><a class="reference internal" href="types.html">Types</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Functions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="api.html">Python API</a></li>
<li class="toctree-l1"><a class="reference internal" href="annotationdb.html">Annotation Database</a></li>
<li class="toctree-l1"><a class="reference internal" href="other_resources.html">Other Resources</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">Hail</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
          <li><a href="exprlang.html">Expression Language</a> &raquo;</li>
        
      <li>Functions</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/functions.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast,
.nboutput.nblast {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast + .nbinput {
    margin-top: -19px;
}

/* nice headers on first paragraph of info/warning boxes */
.admonition .first {
    margin: -12px;
    padding: 6px 12px;
    margin-bottom: 12px;
    color: #fff;
    line-height: 1;
    display: block;
}
.admonition.warning .first {
    background: #f0b37e;
}
.admonition.note .first {
    background: #6ab0de;
}
.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}
</style>
<div class="section" id="functions">
<h1>Functions<a class="headerlink" href="#functions" title="Permalink to this headline">Â¶</a></h1>
<blockquote>
<div><ul>
<li><p class="first"><strong>combineVariants(left: Variant, right: Variant)</strong>: <em>Struct</em></p>
<blockquote>
<div><div class="annotation docutils container">
<ul class="simple">
<li><strong>variant</strong> (<em>Variant</em>) &#8211; Resulting combined variant.</li>
<li><strong>laIndices</strong> (<em>Dict[Int, Int]</em>) &#8211; Mapping from new to old allele index for the left variant.</li>
<li><strong>raIndices</strong> (<em>Dict[Int, Int]</em>) &#8211; Mapping from new to old allele index for the right variant.</li>
</ul>
</div>
<p>Combines the alleles of two variants at the same locus, making sure that ref and alt alleles are represented uniformely.
In addition to the resulting variant containing all alleles, this function also returns the mapping from the old to the new allele indices.
Note that this mapping counts the reference allele always contains the reference allele mapping 0 -&gt; 0.</p>
<blockquote>
<div><div class="highlight-text"><div class="highlight"><pre><span></span>let left = Variant(&quot;1:1000:AT:A,CT&quot;) and right = Variant(&quot;1:1000:A:C,AGG&quot;) in combineVariants(left,right)
<span class="hll">result: Struct{&#39;variant&#39;: Variant(contig=1, start=1000, ref=AT, alts=[AltAllele(ref=AT, alt=A), AltAllele(ref=AT, alt=CT), AltAllele(ref=AT, alt=AGGT)]), &#39;laIndices&#39;: {0: 0, 1: 1, 2: 2}, &#39;raIndices&#39;: {0:0, 2: 1, 3: 2}}
</span></pre></div>
</div>
</div></blockquote>
<p><strong>Arguments</strong></p>
<blockquote>
<div><ul class="simple">
<li><strong>left</strong> (<em>Variant</em>) &#8211; Left variant to combine.</li>
<li><strong>right</strong> (<em>Variant</em>) &#8211; Right variant to combine.</li>
</ul>
</div></blockquote>
</div></blockquote>
</li>
<li><p class="first"><strong>drop(s: Struct, identifiers: String*)</strong>: <em>Struct</em></p>
<blockquote>
<div><p>Return a new <code class="docutils literal"><span class="pre">Struct</span></code> with the a subset of fields not matching <code class="docutils literal"><span class="pre">identifiers</span></code>.</p>
<div class="highlight-text"><div class="highlight"><pre><span></span>let s = {gene: &quot;ACBD&quot;, function: &quot;LOF&quot;, nHet: 12} in drop(s, gene, function)
<span class="hll">result: {nHet: 12}
</span></pre></div>
</div>
<p><strong>Arguments</strong></p>
<blockquote>
<div><ul class="simple">
<li><strong>s</strong> (<em>Struct</em>) &#8211; Struct to drop fields from.</li>
<li><strong>identifiers</strong> (<em>String*</em>) &#8211; Field names to drop from <code class="docutils literal"><span class="pre">s</span></code>. Multiple arguments allowed.</li>
</ul>
</div></blockquote>
</div></blockquote>
</li>
<li><p class="first"><strong>exp(x: Double)</strong>: <em>Double</em></p>
<blockquote>
<div><p>Returns Euler&#8217;s number <code class="docutils literal"><span class="pre">e</span></code> raised to the power of the given value <code class="docutils literal"><span class="pre">x</span></code>.</p>
<p><strong>Arguments</strong></p>
<blockquote>
<div><ul class="simple">
<li><strong>x</strong> (<em>Double</em>) &#8211; the exponent to raise <code class="docutils literal"><span class="pre">e</span></code> to.</li>
</ul>
</div></blockquote>
</div></blockquote>
</li>
<li><p class="first"><strong>fet(a: Int, b: Int, c: Int, d: Int)</strong>: <em>Struct</em></p>
<blockquote>
<div><div class="annotation docutils container">
<ul class="simple">
<li><strong>pValue</strong> (<em>Double</em>) &#8211; p-value</li>
<li><strong>oddsRatio</strong> (<em>Double</em>) &#8211; odds ratio</li>
<li><strong>ci95Lower</strong> (<em>Double</em>) &#8211; lower bound for 95% confidence interval</li>
<li><strong>ci95Upper</strong> (<em>Double</em>) &#8211; upper bound for 95% confidence interval</li>
</ul>
</div>
<p>Calculates the p-value, odds ratio, and 95% confidence interval with Fisher&#8217;s exact test (FET) for 2x2 tables.</p>
<p><strong>Examples</strong></p>
<p>Annotate each variant with Fisher&#8217;s exact test association results (assumes minor/major allele count variant annotations have been computed):</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="p">(</span><span class="n">vds</span><span class="o">.</span><span class="n">annotate_variants_expr</span><span class="p">(</span>
<span class="gp">... </span>  <span class="s1">&#39;va.fet = let macCase = gs.filter(g =&gt; sa.pheno.isCase).map(g =&gt; g.nNonRefAlleles()).sum() and &#39;</span>
<span class="gp">... </span>  <span class="s1">&#39;macControl = gs.filter(g =&gt; !sa.pheno.isCase).map(g =&gt; g.nNonRefAlleles()).sum() and &#39;</span>
<span class="gp">... </span>  <span class="s1">&#39;majCase = gs.filter(g =&gt; sa.pheno.isCase).map(g =&gt; 2 - g.nNonRefAlleles()).sum() and &#39;</span>
<span class="gp">... </span>  <span class="s1">&#39;majControl = gs.filter(g =&gt; !sa.pheno.isCase).map(g =&gt; 2 - g.nNonRefAlleles()).sum() in &#39;</span>
<span class="gp">... </span>  <span class="s1">&#39;fet(macCase, macControl, majCase, majControl)&#39;</span><span class="p">))</span>
</pre></div>
</div>
<p><strong>Notes</strong></p>
<p><code class="docutils literal"><span class="pre">fet</span></code> is identical to the version implemented in <a class="reference external" href="https://stat.ethz.ch/R-manual/R-devel/library/stats/html/fisher.test.html">R</a> with default parameters (two-sided, alpha = 0.05, null hypothesis that the odds ratio equals 1).</p>
<p><strong>Arguments</strong></p>
<blockquote>
<div><ul class="simple">
<li><strong>a</strong> (<em>Int</em>) &#8211; value for cell 1</li>
<li><strong>b</strong> (<em>Int</em>) &#8211; value for cell 2</li>
<li><strong>c</strong> (<em>Int</em>) &#8211; value for cell 3</li>
<li><strong>d</strong> (<em>Int</em>) &#8211; value for cell 4</li>
</ul>
</div></blockquote>
</div></blockquote>
</li>
<li><p class="first"><strong>Genotype(v: Variant, c: Int, ad: Array[Int], dp: Int, gq: Int, pl: Array[Int])</strong>: <em>Genotype</em></p>
<blockquote>
<div><p>Construct a <a class="reference internal" href="types.html#genotype"><span class="std std-ref">Genotype</span></a> object by specifying the variant, call, allelic depths, depth, genotype quality, and phred-scaled likelihoods.</p>
<div class="highlight-text"><div class="highlight"><pre><span></span>let v = Variant(&quot;7:76324539:A:G&quot;) and call = Call(0) and
  ad = [10, 0] and dp = 10 and gq = 20 and pl = [0, 10, 100] and
  g = Genotype(v, call, ad, dp, gq, pl) in g.isHomRef()
<span class="hll">result: true
</span></pre></div>
</div>
<p><strong>Arguments</strong></p>
<blockquote>
<div><ul class="simple">
<li><strong>v</strong> (<em>Variant</em>) &#8211; Variant</li>
<li><strong>c</strong> (<em>Int</em>) &#8211; Call</li>
<li><strong>ad</strong> (<em>Array[Int]</em>) &#8211; Allelic depths</li>
<li><strong>dp</strong> (<em>Int</em>) &#8211; Depth</li>
<li><strong>gq</strong> (<em>Int</em>) &#8211; Genotype quality</li>
<li><strong>pl</strong> (<em>Array[Int]</em>) &#8211; Phred-scaled likelihoods</li>
</ul>
</div></blockquote>
</div></blockquote>
</li>
<li><p class="first"><strong>Genotype(v: Variant, gt: Int, prob: Array[Double])</strong>: <em>Genotype</em></p>
<blockquote>
<div><p>Construct a <a class="reference internal" href="types.html#genotype"><span class="std std-ref">Genotype</span></a> object from a variant, a genotype call, and an array of genotype probabilities.</p>
<div class="highlight-text"><div class="highlight"><pre><span></span>let v = Variant(&quot;7:76324539:A:G&quot;) and gt = 0 and prob = [0.8, 0.1, 0.1] and
  g = Genotype(v, gt, prob) in g.isHomRef()
<span class="hll">result: true
</span></pre></div>
</div>
<p><strong>Arguments</strong></p>
<blockquote>
<div><ul class="simple">
<li><strong>v</strong> (<em>Variant</em>) &#8211; Variant</li>
<li><strong>gt</strong> (<em>Int</em>) &#8211; Genotype call integer</li>
<li><strong>prob</strong> (<em>Array[Double]</em>) &#8211; Genotype probabilities</li>
</ul>
</div></blockquote>
</div></blockquote>
</li>
<li><p class="first"><strong>Genotype(v: Variant, prob: Array[Double])</strong>: <em>Genotype</em></p>
<blockquote>
<div><p>Construct a <a class="reference internal" href="types.html#genotype"><span class="std std-ref">Genotype</span></a> object from a variant and an array of genotype probabilities.</p>
<div class="highlight-text"><div class="highlight"><pre><span></span>let v = Variant(&quot;7:76324539:A:G&quot;) and prob = [0.2, 0.7, 0.1] and
  g = Genotype(v, prob) in g.isHet()
<span class="hll">result: true
</span></pre></div>
</div>
<p><strong>Arguments</strong></p>
<blockquote>
<div><ul class="simple">
<li><strong>v</strong> (<em>Variant</em>) &#8211; Variant</li>
<li><strong>prob</strong> (<em>Array[Double]</em>) &#8211; Genotype probabilities</li>
</ul>
</div></blockquote>
</div></blockquote>
</li>
<li><p class="first"><strong>gtIndex(j: Int, k: Int)</strong>: <em>Int</em></p>
<blockquote>
<div><p>Convert from <code class="docutils literal"><span class="pre">j/k</span></code> pair to genotype index (triangular numbers).</p>
<p><strong>Arguments</strong></p>
<blockquote>
<div><ul class="simple">
<li><strong>j</strong> (<em>Int</em>) &#8211; j in <code class="docutils literal"><span class="pre">j/k</span></code> pairs.</li>
<li><strong>k</strong> (<em>Int</em>) &#8211; k in <code class="docutils literal"><span class="pre">j/k</span></code> pairs.</li>
</ul>
</div></blockquote>
</div></blockquote>
</li>
<li><p class="first"><strong>gtj(i: Int)</strong>: <em>Int</em></p>
<blockquote>
<div><p>Convert from genotype index (triangular numbers) to <code class="docutils literal"><span class="pre">j/k</span></code> pairs. Returns <code class="docutils literal"><span class="pre">j</span></code>.</p>
<p><strong>Arguments</strong></p>
<blockquote>
<div><ul class="simple">
<li><strong>i</strong> (<em>Int</em>) &#8211; Genotype index.</li>
</ul>
</div></blockquote>
</div></blockquote>
</li>
<li><p class="first"><strong>gtk(k: Int)</strong>: <em>Int</em></p>
<blockquote>
<div><p>Convert from genotype index (triangular numbers) to <code class="docutils literal"><span class="pre">j/k</span></code> pairs. Returns <code class="docutils literal"><span class="pre">k</span></code>.</p>
<p><strong>Arguments</strong></p>
<blockquote>
<div><ul class="simple">
<li><strong>k</strong> (<em>Int</em>) &#8211; Genotype index.</li>
</ul>
</div></blockquote>
</div></blockquote>
</li>
<li><p class="first"><strong>hwe(nHomRef: Int, nHet: Int, nHomVar: Int)</strong>: <em>Struct</em></p>
<blockquote>
<div><div class="annotation docutils container">
<ul class="simple">
<li><strong>rExpectedHetFrequency</strong> (<em>Double</em>) &#8211; Expected rHeterozygosity based on Hardy Weinberg Equilibrium</li>
<li><strong>pHWE</strong> (<em>Double</em>) &#8211; P-value</li>
</ul>
</div>
<p>Compute Hardy Weinberg Equilbrium (HWE) p-value.</p>
<p><strong>Examples</strong></p>
<p>Compute HWE p-value per variant:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="p">(</span><span class="n">vds</span><span class="o">.</span><span class="n">annotate_variants_expr</span><span class="p">(</span><span class="s1">&#39;va.hwe = &#39;</span>
<span class="gp">... </span>    <span class="s1">&#39;let nHomRef = gs.filter(g =&gt; g.isHomRef()).count().toInt() and &#39;</span>
<span class="gp">... </span>    <span class="s1">&#39;nHet = gs.filter(g =&gt; g.isHet()).count().toInt() and &#39;</span>
<span class="gp">... </span>    <span class="s1">&#39;nHomVar = gs.filter(g =&gt; g.isHomVar()).count().toInt() in &#39;</span>
<span class="gp">... </span>    <span class="s1">&#39;hwe(nHomRef, nHet, nHomVar)&#39;</span><span class="p">))</span>
</pre></div>
</div>
<p><strong>Notes</strong></p>
<p>Hail computes the exact p-value with mid-p-value correction, i.e. the probability of a less-likely outcome plus one-half the probability of an equally-likely outcome. See this <a class="reference external" href="../LeveneHaldane.pdf">document</a> for details on the Levene-Haldane distribution and references.</p>
<p><strong>Arguments</strong></p>
<blockquote>
<div><ul class="simple">
<li><strong>nHomRef</strong> (<em>Int</em>) &#8211; Number of samples that are homozygous for the reference allele.</li>
<li><strong>nHet</strong> (<em>Int</em>) &#8211; Number of samples that are heterozygotes.</li>
<li><strong>nHomVar</strong> (<em>Int</em>) &#8211; Number of samples that are homozygous for the alternate allele.</li>
</ul>
</div></blockquote>
</div></blockquote>
</li>
<li><p class="first"><strong>index(structs: Array[Struct], identifier: String)</strong>: <em>Dict[String, Struct]</em></p>
<blockquote>
<div><p>Returns a Dict keyed by the string field <code class="docutils literal"><span class="pre">identifier</span></code> of each <code class="docutils literal"><span class="pre">Struct</span></code> in the <code class="docutils literal"><span class="pre">Array</span></code> and values that are structs with the remaining fields.</p>
<div class="highlight-text"><div class="highlight"><pre><span></span>let a = [{PLI: 0.998, genename: &quot;gene1&quot;, hits_in_exac: 1},
         {PLI: 0.0015, genename: &quot;gene2&quot;, hits_in_exac: 10},
         {PLI: 0.9045, genename: &quot;gene3&quot;, hits_in_exac: 2}] and
    d = index(a, genename) in global.gene_dict[&quot;gene1&quot;]

<span class="hll">result: {PLI: 0.998, hits_in_exac: 1}
</span></pre></div>
</div>
</div></blockquote>
</li>
<li><p class="first"><strong>Interval(startLocus: Locus, endLocus: Locus)</strong>: <em>Interval</em></p>
<blockquote>
<div><p>Construct a <a class="reference internal" href="types.html#interval"><span class="std std-ref">Interval</span></a> object. Intervals are <strong>left inclusive, right exclusive</strong>.  This means that <code class="docutils literal"><span class="pre">[chr1:1,</span> <span class="pre">chr1:3)</span></code> contains <code class="docutils literal"><span class="pre">chr1:1</span></code> and <code class="docutils literal"><span class="pre">chr1:2</span></code>.</p>
<p><strong>Arguments</strong></p>
<blockquote>
<div><ul class="simple">
<li><strong>startLocus</strong> (<em>Locus</em>) &#8211; Start position of interval</li>
<li><strong>endLocus</strong> (<em>Locus</em>) &#8211; End position of interval</li>
</ul>
</div></blockquote>
</div></blockquote>
</li>
<li><p class="first"><strong>isDefined(a: T)</strong>: <em>Boolean</em> &#8211;    Returns true if item is non-missing. Otherwise, false.</p>
</li>
<li><p class="first"><strong>isMissing(a: T)</strong>: <em>Boolean</em> &#8211;    Returns true if item is missing. Otherwise, false.</p>
</li>
<li><p class="first"><strong>json(x: T)</strong>: <em>String</em> &#8211;  Returns the JSON representation of a data type.</p>
</li>
<li><p class="first"><strong>Locus(contig: String, pos: Int)</strong>: <em>Locus</em></p>
<blockquote>
<div><p>Construct a <a class="reference internal" href="types.html#locus"><span class="std std-ref">Locus</span></a> object.</p>
<div class="highlight-text"><div class="highlight"><pre><span></span>let l = Locus(&quot;1&quot;, 10040532) in l.position
<span class="hll">result: 10040532
</span></pre></div>
</div>
<p><strong>Arguments</strong></p>
<blockquote>
<div><ul class="simple">
<li><strong>contig</strong> (<em>String</em>) &#8211; String representation of contig.</li>
<li><strong>pos</strong> (<em>Int</em>) &#8211; SNP position or start of an indel.</li>
</ul>
</div></blockquote>
</div></blockquote>
</li>
<li><p class="first"><strong>Locus(s: String)</strong>: <em>Locus</em></p>
<blockquote>
<div><p>Construct a <a class="reference internal" href="types.html#locus"><span class="std std-ref">Locus</span></a> object.</p>
<div class="highlight-text"><div class="highlight"><pre><span></span>let l = Locus(&quot;1:10040532&quot;) in l.position
<span class="hll">result: 10040532
</span></pre></div>
</div>
<p><strong>Arguments</strong></p>
<blockquote>
<div><ul class="simple">
<li><strong>s</strong> (<em>String</em>) &#8211; String of the form <code class="docutils literal"><span class="pre">CHR:POS</span></code></li>
</ul>
</div></blockquote>
</div></blockquote>
</li>
<li><p class="first"><strong>log(x: Double, b: Double)</strong>: <em>Double</em></p>
<blockquote>
<div><p>Returns the base <code class="docutils literal"><span class="pre">b</span></code> logarithm of the given value <code class="docutils literal"><span class="pre">x</span></code>.</p>
<p><strong>Arguments</strong></p>
<blockquote>
<div><ul class="simple">
<li><strong>x</strong> (<em>Double</em>) &#8211; the number to take the base <code class="docutils literal"><span class="pre">b</span></code> logarithm of.</li>
<li><strong>b</strong> (<em>Double</em>) &#8211; the base.</li>
</ul>
</div></blockquote>
</div></blockquote>
</li>
<li><p class="first"><strong>log(x: Double)</strong>: <em>Double</em></p>
<blockquote>
<div><p>Returns the natural logarithm of the given value <code class="docutils literal"><span class="pre">x</span></code>.</p>
<p><strong>Arguments</strong></p>
<blockquote>
<div><ul class="simple">
<li><strong>x</strong> (<em>Double</em>) &#8211; the number to take the natural logarithm of.</li>
</ul>
</div></blockquote>
</div></blockquote>
</li>
<li><p class="first"><strong>log10(x: Double)</strong>: <em>Double</em></p>
<blockquote>
<div><p>Returns the base 10 logarithm of the given value <code class="docutils literal"><span class="pre">x</span></code>.</p>
<p><strong>Arguments</strong></p>
<blockquote>
<div><ul class="simple">
<li><strong>x</strong> (<em>Double</em>) &#8211; the number to take the base 10 logarithm of.</li>
</ul>
</div></blockquote>
</div></blockquote>
</li>
<li><p class="first"><strong>merge(s1: Struct, s2: Struct)</strong>: <em>Struct</em></p>
<blockquote>
<div><p>Create a new <code class="docutils literal"><span class="pre">Struct</span></code> with all fields in <code class="docutils literal"><span class="pre">s1</span></code> and <code class="docutils literal"><span class="pre">s2</span></code>.</p>
<div class="highlight-text"><div class="highlight"><pre><span></span>let s1 = {gene: &quot;ACBD&quot;, function: &quot;LOF&quot;} and s2 = {a: 20, b: &quot;hello&quot;} in merge(s1, s2)
<span class="hll">result: {gene: &quot;ACBD&quot;, function: &quot;LOF&quot;, a: 20, b: &quot;hello&quot;}
</span></pre></div>
</div>
</div></blockquote>
</li>
<li><p class="first"><strong>orElse(a: T, b: T)</strong>: <em>T</em></p>
<blockquote>
<div><p>If <code class="docutils literal"><span class="pre">a</span></code> is not missing, returns <code class="docutils literal"><span class="pre">a</span></code>. Otherwise, returns <code class="docutils literal"><span class="pre">b</span></code>.</p>
<p><strong>Examples</strong></p>
<p>Replace missing phenotype values with the mean value:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="p">[</span><span class="n">mean_height</span><span class="p">]</span> <span class="o">=</span> <span class="n">vds</span><span class="o">.</span><span class="n">query_samples</span><span class="p">([</span><span class="s1">&#39;samples.map(s =&gt; sa.pheno.height).stats()&#39;</span><span class="p">])[</span><span class="s1">&#39;mean&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">vds</span><span class="o">.</span><span class="n">annotate_samples_expr</span><span class="p">(</span><span class="s1">&#39;sa.pheno.heightImputed = orElse(sa.pheno.height, </span><span class="si">%d</span><span class="s1">)&#39;</span> <span class="o">%</span> <span class="n">mean_height</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p class="first"><strong>orMissing(a: Boolean, b: T)</strong>: <em>T</em> &#8211;      If <code class="docutils literal"><span class="pre">predicate</span></code> evaluates to true, returns <code class="docutils literal"><span class="pre">value</span></code>. Otherwise, returns NA.</p>
</li>
<li><p class="first"><strong>pchisqtail(x: Double, df: Double)</strong>: <em>Double</em></p>
<blockquote>
<div><p>Returns right-tail probability p for which p = Prob(<span class="math">\(Z^2\)</span> &gt; x) with <span class="math">\(Z^2\)</span> a chi-squared random variable with degrees of freedom specified by <code class="docutils literal"><span class="pre">df</span></code>. <code class="docutils literal"><span class="pre">x</span></code> must be positive.</p>
<p><strong>Arguments</strong></p>
<blockquote>
<div><ul class="simple">
<li><strong>x</strong> (<em>Double</em>) &#8211; Number at which to compute the probability.</li>
<li><strong>df</strong> (<em>Double</em>) &#8211; Degrees of freedom.</li>
</ul>
</div></blockquote>
</div></blockquote>
</li>
<li><p class="first"><strong>pcoin(p: Double)</strong>: <em>Boolean</em></p>
<blockquote>
<div><p>Returns true with probability <code class="docutils literal"><span class="pre">p</span></code>.</p>
<p><strong>Arguments</strong></p>
<blockquote>
<div><ul class="simple">
<li><strong>p</strong> (<em>Double</em>) &#8211; Probability. Should be between 0.0 and 1.0.</li>
</ul>
</div></blockquote>
</div></blockquote>
</li>
<li><p class="first"><strong>pnorm(x: Double)</strong>: <em>Double</em></p>
<blockquote>
<div><p>Returns left-tail probability p for which p = Prob(<span class="math">\(Z\)</span> &lt; <code class="docutils literal"><span class="pre">x</span></code>) with <span class="math">\(Z\)</span> a standard normal random variable.</p>
<p><strong>Arguments</strong></p>
<blockquote>
<div><ul class="simple">
<li><strong>x</strong> (<em>Double</em>) &#8211; Number at which to compute the probability.</li>
</ul>
</div></blockquote>
</div></blockquote>
</li>
<li><p class="first"><strong>pow(b: Double, x: Double)</strong>: <em>Double</em></p>
<blockquote>
<div><p>Returns <code class="docutils literal"><span class="pre">b</span></code> raised to the power of <code class="docutils literal"><span class="pre">x</span></code>.</p>
<p><strong>Arguments</strong></p>
<blockquote>
<div><ul class="simple">
<li><strong>b</strong> (<em>Double</em>) &#8211; the base.</li>
<li><strong>x</strong> (<em>Double</em>) &#8211; the exponent.</li>
</ul>
</div></blockquote>
</div></blockquote>
</li>
<li><p class="first"><strong>qchisqtail(p: Double, df: Double)</strong>: <em>Double</em></p>
<blockquote>
<div><p>Returns right-quantile x for which p = Prob(<span class="math">\(Z^2\)</span> &gt; x) with <span class="math">\(Z^2\)</span> a chi-squared random variable with degrees of freedom specified by <code class="docutils literal"><span class="pre">df</span></code>. <code class="docutils literal"><span class="pre">p</span></code> must satisfy 0 &lt; p &lt;= 1. Inverse of pchisq1tail.</p>
<p><strong>Arguments</strong></p>
<blockquote>
<div><ul class="simple">
<li><strong>p</strong> (<em>Double</em>) &#8211; Probability</li>
<li><strong>df</strong> (<em>Double</em>) &#8211; Degrees of freedom.</li>
</ul>
</div></blockquote>
</div></blockquote>
</li>
<li><p class="first"><strong>qnorm(p: Double)</strong>: <em>Double</em></p>
<blockquote>
<div><p>Returns left-quantile x for which p = Prob(<span class="math">\(Z\)</span> &lt; x) with <span class="math">\(Z\)</span> a standard normal random variable. <code class="docutils literal"><span class="pre">p</span></code> must satisfy 0 &lt; <code class="docutils literal"><span class="pre">p</span></code> &lt; 1. Inverse of pnorm.</p>
<p><strong>Arguments</strong></p>
<blockquote>
<div><ul class="simple">
<li><strong>p</strong> (<em>Double</em>) &#8211; Probability</li>
</ul>
</div></blockquote>
</div></blockquote>
</li>
<li><p class="first"><strong>range(start: Int, stop: Int, step: Int)</strong>: <em>Array[Int]</em></p>
<blockquote>
<div><p>Generate an <code class="docutils literal"><span class="pre">Array</span></code> with values in the interval <code class="docutils literal"><span class="pre">[start,</span> <span class="pre">stop)</span></code> in increments of step.</p>
<div class="highlight-text"><div class="highlight"><pre><span></span>let r = range(0, 5, 2) in r
<span class="hll">result: [0, 2, 4]
</span></pre></div>
</div>
<p><strong>Arguments</strong></p>
<blockquote>
<div><ul class="simple">
<li><strong>start</strong> (<em>Int</em>) &#8211; Starting number of the sequence.</li>
<li><strong>stop</strong> (<em>Int</em>) &#8211; Generate numbers up to, but not including this number.</li>
<li><strong>step</strong> (<em>Int</em>) &#8211; Difference between each number in the sequence.</li>
</ul>
</div></blockquote>
</div></blockquote>
</li>
<li><p class="first"><strong>range(start: Int, stop: Int)</strong>: <em>Array[Int]</em></p>
<blockquote>
<div><p>Generate an <code class="docutils literal"><span class="pre">Array</span></code> with values in the interval <code class="docutils literal"><span class="pre">[start,</span> <span class="pre">stop)</span></code>.</p>
<div class="highlight-text"><div class="highlight"><pre><span></span>let r = range(5, 8) in r
<span class="hll">result: [5, 6, 7]
</span></pre></div>
</div>
<p><strong>Arguments</strong></p>
<blockquote>
<div><ul class="simple">
<li><strong>start</strong> (<em>Int</em>) &#8211; Starting number of the sequence.</li>
<li><strong>stop</strong> (<em>Int</em>) &#8211; Generate numbers up to, but not including this number.</li>
</ul>
</div></blockquote>
</div></blockquote>
</li>
<li><p class="first"><strong>range(stop: Int)</strong>: <em>Array[Int]</em></p>
<blockquote>
<div><p>Generate an <code class="docutils literal"><span class="pre">Array</span></code> with values in the interval <code class="docutils literal"><span class="pre">[0,</span> <span class="pre">stop)</span></code>.</p>
<div class="highlight-text"><div class="highlight"><pre><span></span>let r = range(3) in r
<span class="hll">result: [0, 1, 2]
</span></pre></div>
</div>
<p><strong>Arguments</strong></p>
<blockquote>
<div><ul class="simple">
<li><strong>stop</strong> (<em>Int</em>) &#8211; Number of integers (whole numbers) to generate, starting from zero.</li>
</ul>
</div></blockquote>
</div></blockquote>
</li>
<li><p class="first"><strong>rnorm(mean: Double, sd: Double)</strong>: <em>Double</em></p>
<blockquote>
<div><p>Returns a random draw from a normal distribution with mean <code class="docutils literal"><span class="pre">mean</span></code> and standard deviation <code class="docutils literal"><span class="pre">sd</span></code>. <code class="docutils literal"><span class="pre">sd</span></code> should be non-negative.</p>
<p><strong>Arguments</strong></p>
<blockquote>
<div><ul class="simple">
<li><strong>mean</strong> (<em>Double</em>) &#8211; Mean value of normal distribution.</li>
<li><strong>sd</strong> (<em>Double</em>) &#8211; Standard deviation of normal distribution.</li>
</ul>
</div></blockquote>
</div></blockquote>
</li>
<li><p class="first"><strong>runif(min: Double, max: Double)</strong>: <em>Double</em></p>
<blockquote>
<div><p>Returns a random draw from a uniform distribution on [<code class="docutils literal"><span class="pre">min</span></code>, <code class="docutils literal"><span class="pre">max</span></code>). <code class="docutils literal"><span class="pre">min</span></code> should be less than or equal to <code class="docutils literal"><span class="pre">max</span></code>.</p>
<p><strong>Arguments</strong></p>
<blockquote>
<div><ul class="simple">
<li><strong>min</strong> (<em>Double</em>) &#8211; Minimum value of interval.</li>
<li><strong>max</strong> (<em>Double</em>) &#8211; Maximum value of interval, non-inclusive.</li>
</ul>
</div></blockquote>
</div></blockquote>
</li>
<li><p class="first"><strong>select(s: Struct, identifiers: String*)</strong>: <em>Struct</em></p>
<blockquote>
<div><p>Return a new <code class="docutils literal"><span class="pre">Struct</span></code> with a subset of fields.</p>
<div class="highlight-text"><div class="highlight"><pre><span></span>let s = {gene: &quot;ACBD&quot;, function: &quot;LOF&quot;, nHet: 12} in select(s, gene, function)
<span class="hll">result: {gene: &quot;ACBD&quot;, function: &quot;LOF&quot;}
</span></pre></div>
</div>
<p><strong>Arguments</strong></p>
<blockquote>
<div><ul class="simple">
<li><strong>s</strong> (<em>Struct</em>) &#8211; Struct to select fields from.</li>
<li><strong>identifiers</strong> (<em>String*</em>) &#8211; Field names to select from <code class="docutils literal"><span class="pre">s</span></code>. Multiple arguments allowed.</li>
</ul>
</div></blockquote>
</div></blockquote>
</li>
<li><p class="first"><strong>sqrt(x: Double)</strong>: <em>Double</em></p>
<blockquote>
<div><p>Returns the square root of the given value <code class="docutils literal"><span class="pre">x</span></code>.</p>
<p><strong>Arguments</strong></p>
<blockquote>
<div><ul class="simple">
<li><strong>x</strong> (<em>Double</em>) &#8211; the number to take the square root of.</li>
</ul>
</div></blockquote>
</div></blockquote>
</li>
<li><p class="first"><strong>str(x: T)</strong>: <em>String</em></p>
<blockquote>
<div><p>Returns the string representation of a data type.</p>
<div class="highlight-text"><div class="highlight"><pre><span></span>let v = Variant(&quot;1&quot;, 278653, &quot;A&quot;, &quot;T&quot;) in str(v)
<span class="hll">result: &quot;1:278653:A:T&quot;
</span></pre></div>
</div>
</div></blockquote>
</li>
<li><p class="first"><strong>Variant(contig: String, pos: Int, ref: String, alts: Array[String])</strong>: <em>Variant</em></p>
<blockquote>
<div><p>Construct a <a class="reference internal" href="types.html#variant"><span class="std std-ref">Variant</span></a> object.</p>
<div class="highlight-text"><div class="highlight"><pre><span></span>let v = Variant(&quot;1&quot;, 25782743, &quot;A&quot;, Array(&quot;T&quot;, &quot;TA&quot;)) in v.ref
<span class="hll">result: &quot;A&quot;
</span></pre></div>
</div>
<p><strong>Arguments</strong></p>
<blockquote>
<div><ul class="simple">
<li><strong>contig</strong> (<em>String</em>) &#8211; String representation of contig.</li>
<li><strong>pos</strong> (<em>Int</em>) &#8211; SNP position or start of an indel.</li>
<li><strong>ref</strong> (<em>String</em>) &#8211; Reference allele sequence.</li>
<li><strong>alts</strong> (<em>Array[String]</em>) &#8211; Array of alternate allele sequences.</li>
</ul>
</div></blockquote>
</div></blockquote>
</li>
<li><p class="first"><strong>Variant(contig: String, pos: Int, ref: String, alt: String)</strong>: <em>Variant</em></p>
<blockquote>
<div><p>Construct a <a class="reference internal" href="types.html#variant"><span class="std std-ref">Variant</span></a> object.</p>
<div class="highlight-text"><div class="highlight"><pre><span></span>let v = Variant(&quot;2&quot;, 13427, &quot;T&quot;, &quot;G&quot;) in v.ref
<span class="hll">result: &quot;T&quot;
</span></pre></div>
</div>
<p><strong>Arguments</strong></p>
<blockquote>
<div><ul class="simple">
<li><strong>contig</strong> (<em>String</em>) &#8211; String representation of contig.</li>
<li><strong>pos</strong> (<em>Int</em>) &#8211; SNP position or start of an indel.</li>
<li><strong>ref</strong> (<em>String</em>) &#8211; Reference allele sequence.</li>
<li><strong>alt</strong> (<em>String</em>) &#8211; Alternate allele sequence.</li>
</ul>
</div></blockquote>
</div></blockquote>
</li>
<li><p class="first"><strong>Variant(s: String)</strong>: <em>Variant</em></p>
<blockquote>
<div><p>Construct a <a class="reference internal" href="types.html#variant"><span class="std std-ref">Variant</span></a> object.</p>
<div class="highlight-text"><div class="highlight"><pre><span></span>let v = Variant(&quot;7:76324539:A:G&quot;) in v.contig
<span class="hll">result: &quot;7&quot;
</span></pre></div>
</div>
<p><strong>Arguments</strong></p>
<blockquote>
<div><ul class="simple">
<li><strong>s</strong> (<em>String</em>) &#8211; String of the form <code class="docutils literal"><span class="pre">CHR:POS:REF:ALT</span></code> or <code class="docutils literal"><span class="pre">CHR:POS:REF:ALT1,ALT2...ALTN</span></code> specifying the contig, position, reference and alternate alleles.</li>
</ul>
</div></blockquote>
</div></blockquote>
</li>
</ul>
</div></blockquote>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="api.html" class="btn btn-neutral float-right" title="Python API" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="types.html" class="btn btn-neutral" title="Types" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016, Hail Team.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'devel',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
      <script type="text/javascript" src="../bootstrap.min.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
  
  
   

</body>
</html>